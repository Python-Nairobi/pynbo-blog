<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="#PyNBO, The Python-Nairobi Blog">


        <title>Introduction to Web Scraping using Selenium // #PyNBO // The Python-Nairobi Blog</title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./theme/css/pure.css">

    <link rel="stylesheet" href="./theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
    <link href="./theme/css/cuprum_bolditalic/cuprum.css" rel="stylesheet">
    <link href="./theme/css/pynbo.css" rel="stylesheet">
</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar sidebar-article pure-u">
        <header class="header-article">
            <hgroup>
                <a href="./author/roger-taracha.html" title="See posts by Roger Taracha">
                    <img class="avatar" alt="Roger Taracha" src="http://www.gravatar.com/avatar/8cdc70cab6366361e806317f1ffd8a49">
                    <h2 class="article-info">Roger Taracha</h2>
                </a>
                <small class="about-author">Taracha is a Software Developer & Mentor based in Nairobi. For more catch me on [Medium](https://medium.com/@NabweraTaracha) and on Twitter @thedancercodes.</small>
                <h5>Published</h5>
                <p>September 05, 2017</p>
                <a href="/">&larr;Home</a>
            </hgroup>
        </header>
    </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Introduction to Web Scraping using Selenium</h1>
                        <p class="post-meta">
                            // under                                 <a class="post-category" href="./tag/python.html">python</a>
                                <a class="post-category" href="./tag/webscraping.html">webscraping</a>
                                <a class="post-category" href="./tag/selenium.html">selenium</a>
                                <a class="post-category" href="./tag/chromedriver.html">chromedriver</a>
                        </p>
                </header>
            </section>
            <h3>Title</h3>
<p>Introduction to Web Scraping using Selenium</p>
<p>This article first appeared on <a href="https://medium.com/@NabweraTaracha/introduction-to-web-scraping-using-selenium-7ec377a8cf72">Medium.com</a></p>
<h3>What is Web Scraping?</h3>
<p>As the name suggests, this is a data extraction technique used for extracting data from websites. It is an automated process where an application processes the HTML of a Web Page to extract data for manipulation such as converting the Web page to another format and copying into a local database or spreadsheet for later retrieval or analysis.</p>
<h3>What will we build?</h3>
<p>In this tutorial we will build a web scraping program that will scrape a Github user profile and get the Repository Names and the Languages for the Pinned Repositories.
If you would like to jump straight into the project, here is link to the repo on Github.
https://github.com/TheDancerCodes/Selenium-Webscraping-Example</p>
<h3>What will we require?</h3>
<p>We will also use the following packages and driver.
* <a href="https://pypi.python.org/pypi/selenium">selenium package</a> — used to automate web browser interaction from Python
* <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads">ChromeDriver</a> — provides a platform to open up and perform tasks in specified browser.
* <a href="https://virtualenv.pypa.io/en/stable/">Virtualenv</a> — to create an isolated Python environment for our project.
* <a href="http://selenium-python.readthedocs.io/">Extras</a> - Selenium-Python ReadTheDocs Resource.</p>
<h3>Steps</h3>
<ol>
<li>Setup project</li>
<li>Import Modules</li>
<li>Make The Request</li>
<li>Get the Response</li>
<li>Run the program</li>
</ol>
<h3>Set up the project</h3>
<p>Create a new project folder. Within that folder create an <code>setup.py</code> file.
In this file, type in our dependency <code>selenium</code>.</p>
<p>Open up your command line &amp; create a virtual environment using the basic command:</p>
<p><code>$ virtualenv webscraping_example</code></p>
<p>Next, install the dependency into your virtualenv by running the following command in the terminal:</p>
<p><code>$(webscraping_example) pip install -r setup.py</code></p>
<h3>Import Required Modules</h3>
<p>Specify the modules required for the project.</p>
<div class="highlight"><pre><span></span><span class="sb">``</span><span class="err">`</span><span class="n">python</span>
<span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support.ui</span> <span class="kn">import</span> <span class="n">WebDriverWait</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>
<span class="kn">from</span> <span class="nn">selenium.common.exceptions</span> <span class="kn">import</span> <span class="n">TimeoutException</span>

<span class="sb">``</span><span class="err">`</span>
</pre></div>


<h3>Make The Request</h3>
<p>When making the request we need to consider the following:
1. Pass in the desired website url.
2. Implement a Try and Except for handling a timeout situation should it occur.</p>
<div class="highlight"><pre><span></span><span class="err">```</span><span class="n">python</span>
<span class="cp"># Specifying incognito mode as you launch your browser[OPTIONAL]</span>
<span class="n">option</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">ChromeOptions</span><span class="p">()</span>
<span class="n">option</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="err">“</span> <span class="err">—</span> <span class="n">incognito</span><span class="err">”</span><span class="p">)</span>

<span class="cp"># Create new Instance of Chrome in incognito mode</span>
<span class="n">browser</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">executable_path</span><span class="o">=</span><span class="err">&#39;</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Application</span> <span class="n">Support</span><span class="o">/</span><span class="n">Google</span><span class="o">/</span><span class="n">chromedriver</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">chrome_options</span><span class="o">=</span><span class="n">option</span><span class="p">)</span>

<span class="cp"># Go to desired website</span>
<span class="n">browser</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;https://github.com/TheDancerCodes&quot;</span><span class="p">)</span>

<span class="cp"># Wait 20 seconds for page to load</span>
<span class="n">timeout</span> <span class="o">=</span> <span class="mi">20</span>

<span class="nl">try</span><span class="p">:</span>
    <span class="cp"># Wait until the final element [Avatar link] is loaded.</span>
    <span class="cp"># Assumption: If Avatar link is loaded, the whole page would be relatively loaded because it is among</span>
    <span class="cp"># the last things to be loaded.</span>
    <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">timeout</span><span class="p">).</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="p">.</span><span class="n">visibility_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="p">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s">&quot;//img[@class=&#39;avatar width-full rounded-2&#39;]&quot;</span><span class="p">)))</span>

<span class="n">except</span> <span class="nl">TimeoutException</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Timed out waiting for page to load&quot;</span><span class="p">)</span>
    <span class="n">browser</span><span class="p">.</span><span class="n">quit</span><span class="p">()</span>

<span class="err">```</span>
</pre></div>


<h3>Get the Response</h3>
<p>Once we make a request and it is successful, we need to get a response.
We will break the response into 2 and combine it at the end.
The response is the title and language of the pinned repositories of the Github profile.</p>
<div class="highlight"><pre><span></span>```<span class="nv">python</span>
# <span class="nv">find_elements_by_xpath</span> <span class="o">-</span> <span class="nv">Returns</span> <span class="nv">an</span> <span class="nv">array</span> <span class="nv">of</span> <span class="nv">selenium</span> <span class="nv">objects</span>.
<span class="nv">titles_element</span> <span class="o">=</span> <span class="nv">browser</span>.<span class="nv">find_elements_by_xpath</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">//a[@class=&#39;text-bold&#39;]</span><span class="s2">&quot;</span><span class="ss">)</span>

# <span class="nv">List</span> <span class="nv">Comprehension</span> <span class="nv">to</span> <span class="nv">get</span> <span class="nv">the</span> <span class="nv">actual</span> <span class="nv">repo</span> <span class="nv">titles</span> <span class="nv">and</span> <span class="nv">not</span> <span class="nv">the</span> <span class="nv">selenium</span> <span class="nv">objects</span>.
<span class="nv">titles</span> <span class="o">=</span> [<span class="nv">x</span>.<span class="nv">text</span> <span class="k">for</span> <span class="nv">x</span> <span class="nv">in</span> <span class="nv">titles_element</span>]


<span class="nv">print</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">TITLES:</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">print</span><span class="ss">(</span><span class="nv">titles</span>, <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="ss">)</span>


# <span class="nv">Get</span> <span class="nv">all</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">pinned</span> <span class="nv">repo</span> <span class="nv">languages</span>
<span class="nv">language_element</span> <span class="o">=</span> <span class="nv">browser</span>.<span class="nv">find_elements_by_xpath</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">//p[@class=&#39;mb-0 f6 text-gray&#39;]</span><span class="s2">&quot;</span><span class="ss">)</span>
<span class="nv">languages</span> <span class="o">=</span> [<span class="nv">x</span>.<span class="nv">text</span> <span class="k">for</span> <span class="nv">x</span> <span class="nv">in</span> <span class="nv">language_element</span>] # <span class="nv">same</span> <span class="nv">concept</span> <span class="nv">as</span> <span class="k">for</span><span class="o">-</span><span class="k">loop</span><span class="o">/</span> <span class="nv">list</span><span class="o">-</span><span class="nv">comprehension</span> <span class="nv">above</span>.

<span class="nv">print</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">LANGUAGES:</span><span class="s2">&quot;</span><span class="ss">)</span>
<span class="nv">print</span><span class="ss">(</span><span class="nv">languages</span>, <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="ss">)</span>

# <span class="nv">Pair</span> <span class="nv">each</span> <span class="nv">title</span> <span class="nv">with</span> <span class="nv">its</span> <span class="nv">corresponding</span> <span class="nv">language</span> <span class="nv">using</span> <span class="nv">zip</span> <span class="nv">function</span> <span class="nv">and</span> <span class="nv">print</span> <span class="nv">each</span> <span class="nv">pair</span>
<span class="k">for</span> <span class="nv">title</span>, <span class="nv">language</span> <span class="nv">in</span> <span class="nv">zip</span><span class="ss">(</span><span class="nv">titles</span>, <span class="nv">languages</span><span class="ss">)</span>:
    <span class="nv">print</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">RepoName : Language</span><span class="s2">&quot;</span><span class="ss">)</span>
    <span class="nv">print</span><span class="ss">(</span><span class="nv">title</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="s">: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nv">language</span>, <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="ss">)</span>

```
</pre></div>


<h3>Run the program</h3>
<p>Finally execute the program by running it directly in your IDE or by using the following command:</p>
<div class="highlight"><pre><span></span><span class="o">```</span><span class="n">python</span>
<span class="err">$</span> <span class="p">(</span><span class="n">webscraping_example</span><span class="p">)</span> <span class="n">python</span> <span class="n">webscraping_example</span><span class="p">.</span><span class="n">py</span>

<span class="o">```</span>
</pre></div>


<p>You can read more on Web Scraping here
* <a href="https://en.wikipedia.org/wiki/Web_scraping">Wikipedia Page</a>.</p>
<ul>
<li>If you would like to try out this example, <a href="https://github.com/TheDancerCodes/Selenium-Webscraping-Example">here's the link to the source code on github</a>. <code>Fork</code>, <code>Clone</code>, <code>Install requirements</code> and <code>Scrape</code>. </li>
</ul>
            <div class="hr"></div>
            <a href="#" class="go-top">Go Top</a>
<footer class="footer">
    <p>&copy; #PyNBO &ndash;
        Built with
        ( <a href="https://github.com/Python-Nairobi/pure-pynbo"> a slightly modified</a> )
        <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
        for <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
</div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-54801851-1', 'auto');
        ga('require', 'displayfeatures');
        ga('send', 'pageview');
    </script>
</body>
</html>